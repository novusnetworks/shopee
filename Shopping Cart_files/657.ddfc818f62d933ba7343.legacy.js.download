(self.wpJsonpPcmallRcmd=self.wpJsonpPcmallRcmd||[]).push([[657],{2343:function(e,t,n){"use strict";var i;n.d(t,{P:function(){return i}}),function(e){e[e.SIMILAR_PRODUCTS=0]="SIMILAR_PRODUCTS",e[e.CATEGORY=1]="CATEGORY",e[e.COUNTRY=2]="COUNTRY",e[e.SIMILAR_ITEM=3]="SIMILAR_ITEM",e[e.POPULAR=4]="POPULAR",e[e.DAILY_DISCOVER=5]="DAILY_DISCOVER",e[e.OFFICIAL_SHOP=6]="OFFICIAL_SHOP",e[e.OFFICIAL_SHOP_POPULAR=7]="OFFICIAL_SHOP_POPULAR",e[e.TRENDING_SEARCHES=8]="TRENDING_SEARCHES",e[e.FROM_SAME_SHOP=9]="FROM_SAME_SHOP",e[e.SHOPPING_CART=10]="SHOPPING_CART",e[e.RECENTLY_VIEWED=11]="RECENTLY_VIEWED",e[e.YMAL=16]="YMAL",e[e.FIND_SIMILAR_PRODUCTS_FROM_ITEM_CARD=17]="FIND_SIMILAR_PRODUCTS_FROM_ITEM_CARD",e[e.FIND_SIMILAR_PRODUCTS_FROM_SHOPPING_CART=18]="FIND_SIMILAR_PRODUCTS_FROM_SHOPPING_CART",e[e.SIMILAR_PRODUCT_S_MART=19]="SIMILAR_PRODUCT_S_MART",e[e.JUST_FOR_YOU_1111=22]="JUST_FOR_YOU_1111",e[e.SHOP_FOR_YOU_1111=23]="SHOP_FOR_YOU_1111",e[e.BIG_SALE_11_11=26]="BIG_SALE_11_11",e[e.ORDER_PAID=24]="ORDER_PAID",e[e.SIMILAR_PRODUCTS_FROM_PRODUCT_DETAIL=27]="SIMILAR_PRODUCTS_FROM_PRODUCT_DETAIL",e[e.JUST_FOR_YOU_SHOP_FLASH_SALE=28]="JUST_FOR_YOU_SHOP_FLASH_SALE",e[e.COLLECTION_SHOP=34]="COLLECTION_SHOP",e[e.JUST_FOR_YOU_WELCOME_PACKAGE=49]="JUST_FOR_YOU_WELCOME_PACKAGE",e[e.FREQUENTLY_BOUGHT_TOGETHER=35]="FREQUENTLY_BOUGHT_TOGETHER",e[e.SHOP=-1]="SHOP"}(i||(i={}))},196:function(e,t,n){"use strict";n.d(t,{E:function(){return m}});var i,s=n(3804),o=n(7762),r=(0,n(7008).n)("FETCH_CART_YMAL"),a="shoppingcart_sec",d=n(2832),c=n(7844),u=n(6176);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}var _=(0,d.Z)(((i={})[r.REQUESTED]=function(e,t){var n,i=t.payload.key;return l({},e,((n={})[i]=l({},e[i]||{state_update_time:0,fetched_offsets:{}},{progress:u.Z.REQ,error:0}),n))},i[r.SUCCESS]=function(e,t){var n,i,s,o,r,a,d=t.payload,_=d.key,v=d.section,f=d.offset,S=d.data,O=d.shouldReset,R=d.limit,I=e[_]||{},E=I.data||function(e){var t;return{update_time:0,version:"",sections:(t={},t[e]={total:0,data:[],nextOffset:0},t)}}(v),p=(null===(n=E.sections[v])||void 0===n?void 0:n.data)||[];return l({},e,((a={})[_]=l({},I,{data:l({},E,{update_time:S.update_time,version:E.version||S.version,sections:l({},E.sections,(o={},o[v]={total:(null===(i=S.sections[v])||void 0===i?void 0:i.total)||0,data:(0,c.Z)(O?[]:p||[],(null===(s=S.sections[v])||void 0===s?void 0:s.data)||[],f),nextOffset:f+R},o))}),progress:u.Z.OK,fetched_offsets:l({},I.fetched_offsets||{},(r={},r[f]=R,r)),state_update_time:Date.now()}),a))},i[r.FAILED]=function(e,t){var n,i=t.payload,s=i.key,o=i.error;return l({},e,((n={})[s]=l({},e[s],{progress:u.Z.ERR,error:o}),n))},i),{}),v=n(5325),f=n(8947);function S(e){return(0,f.Wc)(e)}var O=[],R=n(7899),I=n(5600);function E(e,t){var n,i={update_time:e.data.update_time,version:e.data.version,sections:(n={},n[t]={total:0,data:[],nextOffset:0},n)},s=e.data.sections.find((function(e){return e&&e.key===t}));if(!s)return i;var o=s.index,r=s.data,a=s.total,d=i.sections[t];if(d.total=a||0,o&&r&&r.item){var c=r.item,u=r.ads;o.forEach((function(e){var t=c.find((function(t){return t.key===e.key}));if(t)d.data.push(t);else if(u){var n=u.find((function(t){return t.key===e.key}));n&&d.data.push(n)}}))}return i}function p(e,t){var n=t.offset,i=t.limit,s=t.viewSessionId,o=S({section:a,viewSessionId:s});return function(t){var s,r,a=e(t);return!(!a||!a[o])&&((null===(s=a[o])||void 0===s||null===(r=s.fetched_offsets)||void 0===r?void 0:r[n])||0)>=i}}function m(e){var t=e.reduxKey,n=void 0===t?"cartYmal":t,i=e.offset,d=void 0===i?0:i,c=e.limit,l=e.shouldReset,m=e.shouldSkipCall,A=e.onFinish,C=e.version,T=e.viewSessionId,P=(0,v.useDispatch)(),L=s.useContext(o.InjectReducerContext).injectAsyncReducer;s.useEffect((function(){var e;L(((e={})[n]=_,e))}),[n,L]);var D,U,h,F,M,y,N=function(e){return s.useCallback((function(t){return t[e]}),[e])}(n),w={store:(0,v.useSelector)(N),viewSessionId:T},H=(M=(D=w).store,y=S({section:a,viewSessionId:D.viewSessionId}),(null==M||null===(U=M[y])||void 0===U||null===(h=U.data)||void 0===h||null===(F=h.sections[a])||void 0===F?void 0:F.data)||O),Y=function(e){var t,n,i,s=e.store,o=S({section:a,viewSessionId:e.viewSessionId});return(null==s||null===(t=s[o])||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.sections[a])||void 0===i?void 0:i.total)||0}(w),g=function(e){var t,n,i=e.store,s=S({section:a,viewSessionId:e.viewSessionId});return null==i||null===(t=i[s])||void 0===t||null===(n=t.data)||void 0===n?void 0:n.version}(w),k=function(e){var t,n=e.store,i=S({section:a,viewSessionId:e.viewSessionId});return(null==n||null===(t=n[i])||void 0===t?void 0:t.progress)||u.Z.INIT}(w),G=function(e){var t,n,i,s=e.store,o=S({section:a,viewSessionId:e.viewSessionId});return(null==s||null===(t=s[o])||void 0===t||null===(n=t.data)||void 0===n||null===(i=n.sections[a])||void 0===i?void 0:i.nextOffset)||0}(w),x=Math.ceil(Y/c),b=s.useMemo((function(){return H.slice(d,d+c)}),[H,d,c]);return s.useEffect((function(){P(function(e){var t=e.limit,n=e.offset,i=void 0===n?0:n,s=e.getStore,o=e.onFinish,d=e.shouldSkipCall,c=e.shouldReset,u=e.version,l=e.viewSessionId,_=S({section:a,viewSessionId:l}),v=(0,f.Wc)({bundle:"shoppingcart",limit:t,offset:i,version:i>0&&u||void 0,view_session_id:l});return(0,R.Z)({apiCall:function(){return function(e){return(0,I.fetchInfo)("/api/v4/recommend/recommend"+e)}(v)},actions:[function(){return{type:r.REQUESTED,payload:{key:_}}},function(e,n){return{type:r.SUCCESS,payload:{key:_,section:a,offset:i,data:E(n,a),shouldReset:c,limit:t}}},function(e,t){return{type:r.FAILED,payload:{key:_,error:t.error}}}],shouldSkipCall:s&&!d?p(s,{offset:i,limit:t,viewSessionId:l}):d,onFinish:o})}({limit:c,offset:d,getStore:N,version:C||void 0,shouldReset:l,onFinish:A,shouldSkipCall:m,viewSessionId:T}))}),[P,c,d,C,N,l,m,A,T]),{allItems:H,items:b,total:Y,version:g,progress:k,totalPageCount:x,nextOffset:G}}},9740:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var i=n(2343),s=function(e){var t=e.catid,n=e.itemid,s=e.shopid,o=e.adsid,r=e.info,a=e.campaignid;return{is_ads:!!e.adsid,adsTrackingData:{adParams:{adsid:o,campaignid:a},recommendParams:{recommendType:i.P.YMAL,catid:t,itemid:n,shopid:s},placement:13,item:{adsid:o,abtest_sign:r},entrance:8}}}},9866:function(e,t,n){"use strict";n.d(t,{T:function(){return c}});var i=n(3804),s=n.n(i),o=n(4111),r=n.n(o),a=n(4310);function d(e){var t=e.show,n=void 0!==t&&t,i=e.color,o=void 0===i?a._8:i,d=e.hideOverlay,c=void 0!==d&&d,u=e.spinnerClassName;return s().createElement("div",{className:r()({"stardust-spinner--hidden":!n},"stardust-spinner")},s().createElement("div",{className:r()("stardust-spinner__background",{"stardust-spinner__background--no-overlay":c})},s().createElement("div",{className:r()(u,"stardust-spinner__main"),role:"img"},s().createElement("svg",{width:"34",height:"12",viewBox:"-1 0 33 12"},s().createElement("circle",{className:"stardust-spinner__spinner",cx:4,cy:6,r:4,fill:o}),s().createElement("circle",{className:"stardust-spinner__spinner",cx:16,cy:6,r:4,fill:o}),s().createElement("circle",{className:"stardust-spinner__spinner",cx:28,cy:6,r:4,fill:o})))))}var c=function(){return i.createElement("div",{className:"spinner-container"},i.createElement(d,{hideOverlay:!0,show:!0}))}},5574:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(9652);function s(e){var t=e.action,n=void 0===t?"unknown":t,s=e.data;return(0,e.track)({type:"action",timestamp:Date.now(),info:{action:n,data:(0,i.ZN)(s||{})}})}},4152:function(e,t,n){e.exports=n.p+"rcmd/5a8f9c86ea547509c949.tr.js"}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopee.io/pcmall-rcmd/_/657.ddfc818f62d933ba7343.legacy.js.map